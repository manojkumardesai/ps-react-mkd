(this["webpackJsonpps-react-mkd"]=this["webpackJsonpps-react-mkd"]||[]).push([[8],{709:function(e,t,r){"use strict";var n=r(0),i=r.n(n),o=r(2),s=r(1),a=r(62),l=Object(o.f)({eventTime:{id:"boxui.readableTime.eventTime",defaultMessage:"{time, date, medium}"},eventTimeToday:{id:"boxui.readableTime.eventTimeToday",defaultMessage:"Today at {time, time, short}"},eventTimeYesterday:{id:"boxui.readableTime.eventTimeYesterday",defaultMessage:"Yesterday at {time, time, short}"},eventTimeDate:{id:"boxui.readableTime.eventTimeDate",defaultMessage:"{time, date, medium} at {time, time, short}"},eventTimeDateShort:{id:"boxui.readableTime.eventTimeDateShort",defaultMessage:"{date} at {time, time, short}"},eventTimeWeekdayLong:{id:"boxui.readableTime.eventTimeWeekdayLong",defaultMessage:"{weekday}, {time, date, medium}"}});function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.a=function(e){var t=e.timestamp,r=e.relativeThreshold,n=void 0===r?s.Gd:r,u=e.allowFutureTimestamps,d=void 0===u||u,f=e.alwaysShowTime,m=void 0!==f&&f,v=e.showWeekday,b=void 0!==v&&v,p=Date.now()-n,h=!Object(a.g)(t);!d&&t>Date.now()&&(t=p);var y=l.eventTime,g=null,w=null;if(Object(a.h)(t))y=l.eventTimeToday;else if(Object(a.i)(t))y=l.eventTimeYesterday;else if(b)y=l.eventTimeWeekdayLong,w=i.a.createElement(o.a,{value:t,weekday:"long"});else if(h&&m)y=l.eventTimeDate;else if(!h&&m)y=l.eventTimeDateShort,g=i.a.createElement(o.a,{value:t,month:"short",day:"numeric"});else if(!h&&!m)return i.a.createElement(o.a,{value:t,month:"short",day:"numeric"});var V=i.a.createElement(o.b,c({},y,{values:{time:t,date:g,weekday:w}}));return Math.abs(Date.now()-t)<=n&&(V=i.a.createElement(o.d,{value:t})),V}},714:function(e,t,r){"use strict";var n=r(0),i=r(10),o=r(5);t.a=function(e){var t=e.className,r=void 0===t?"":t,s=e.color,a=void 0===s?i.h:s,l=e.height,c=void 0===l?16:l,u=e.title,d=e.width,f=void 0===d?16:d;return n.createElement(o.a,{className:"icon-trash ".concat(r),height:c,title:u,viewBox:"0 0 16 16",width:f},n.createElement("path",{className:"fill-color",fill:a,fillRule:"evenodd",d:"M14 2l-1.8 11c-.1.6-.7 1-1.2 1H5c-.6 0-1.1-.5-1.2-1L2 2h12zm-1.2 1H3.2l1.6 9.9s.1.1.2.1h6c.06 0 .12-.036.158-.065l.042-.035L12.8 3zm-2.3 1c.3 0 .5.2.5.5s-.2.5-.5.5h-5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5z"}))}},719:function(e,t,r){"use strict";var n=r(1);t.a={getVersionAction:function(e){var t=e.restored_at,r=e.trashed_at,i=e.version_promoted,o=n.df;return r&&(o=n.Xe),t&&(o=n.Ze),i&&(o=n.Ye),o},getVersionUser:function(e){var t=e.modified_by,r=e.restored_by,i=e.trashed_by;return r||i||t||n.be}}},733:function(e,t,r){"use strict";var n=r(709);r.d(t,"a",(function(){return n.a}))},738:function(e,t,r){"use strict";var n=r(220);r.d(t,"a",(function(){return n.a}))},962:function(e,t,r){},963:function(e,t,r){},964:function(e,t,r){},965:function(e,t,r){},966:function(e,t,r){},967:function(e,t,r){},968:function(e,t,r){},969:function(e,t,r){},970:function(e,t,r){},975:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Ze})),r.d(t,"VersionsSidebarComponent",(function(){return Ae}));var n=r(0),i=r.n(n),o=r(73),s=r.n(o),a=r(8),l=r.n(a),c=r(282),u=r.n(c),d=r(6),f=r.n(d),m=r(693),v=(r(45),r(2)),b=Object(v.f)({versionsEmpty:{id:"be.sidebarVersions.empty",defaultMessage:"No prior versions are available for this file."},versionsPriorWeek:{id:"be.sidebarVersions.priorWeek",defaultMessage:"Last Week"},versionsThisMonth:{id:"be.sidebarVersions.thisMonth",defaultMessage:"This Month"},versionsToday:{id:"be.sidebarVersions.today",defaultMessage:"Today"},versionsYesterday:{id:"be.sidebarVersions.yesterday",defaultMessage:"Yesterday"},versionsTitle:{id:"be.sidebarVersions.title",defaultMessage:"Version History"},versionCurrent:{id:"be.sidebarVersions.current",defaultMessage:"Current Version"},versionActionDelete:{id:"be.sidebarVersions.delete",defaultMessage:"Delete"},versionActionDeleteError:{id:"be.sidebarVersions.deleteError",defaultMessage:"File version could not be deleted."},versionActionDisabledRetention:{id:"be.sidebarVersions.disabledByRetention",defaultMessage:"Disabled by retention policy"},versionActionDownload:{id:"be.sidebarVersions.download",defaultMessage:"Download"},versionActionDownloadError:{id:"be.sidebarVersions.downloadError",defaultMessage:"File version could not be downloaded."},versionActionPreview:{id:"be.sidebarVersions.preview",defaultMessage:"Preview"},versionActionPromote:{id:"be.sidebarVersions.promote",defaultMessage:"Make Current"},versionActionPromoteError:{id:"be.sidebarVersions.promoteError",defaultMessage:"File version could not be made current."},versionActionRestore:{id:"be.sidebarVersions.restore",defaultMessage:"Restore"},versionActionRestoreError:{id:"be.sidebarVersions.restoreError",defaultMessage:"File version could not be restored."},versionActionToggle:{id:"be.sidebarVersions.toggle",defaultMessage:"Toggle Actions Menu"},versionDeletedBy:{id:"be.sidebarVersions.deletedBy",defaultMessage:"Deleted by {name}"},versionFetchError:{id:"be.sidebarVersions.fetchError",defaultMessage:"File versions could not be retrieved."},versionLimitExceeded:{id:"be.sidebarVersions.versionLimitExceeded",defaultMessage:"You are limited to the last {versionLimit, number} {versionLimit, plural, one {version} other {versions}}."},versionNumberBadge:{id:"be.sidebarVersions.versionNumberBadge",defaultMessage:"V{versionNumber}"},versionNumberLabel:{id:"be.sidebarVersions.versionNumberLabel",defaultMessage:"Version number {versionNumber}"},versionPromotedBy:{id:"be.sidebarVersions.promotedBy",defaultMessage:"Promoted from v{versionPromoted} by {name}"},versionRestoredBy:{id:"be.sidebarVersions.restoredBy",defaultMessage:"Restored by {name}"},versionServerError:{id:"be.sidebarVersions.serverError",defaultMessage:"Server Error"},versionUploadedBy:{id:"be.sidebarVersions.uploadedBy",defaultMessage:"Uploaded by {name}"},versionUserUnknown:{id:"be.sidebarVersions.versionUserUnknown",defaultMessage:"Unknown"},versionMaxEntries:{id:"be.sidebarVersions.versionMaxEntries",defaultMessage:"Version history is limited to the last {maxVersions} entries."},versionRetentionDelete:{id:"be.sidebarVersions.versionRetentionDelete",defaultMessage:"Will be deleted {time} by retention policy."},versionRetentionIndefinite:{id:"be.sidebarVersions.versionRetentionIndefinite",defaultMessage:"Retained indefinitely by retention policy."},versionRetentionRemove:{id:"be.sidebarVersions.versionRetentionRemove",defaultMessage:"Retention policy expires on {time}."}}),p=r(308),h=r(738),y=r(223),g=r(351),w=r.n(g),V=r(62),E=r(719),O=r(159),P=r(227),D=r(5),I=function(e){var t=e.className,r=void 0===t?"":t,i=e.color,o=void 0===i?"#444":i,s=e.height,a=void 0===s?14:s,l=e.title,c=e.width,u=void 0===c?16:c;return n.createElement(D.a,{className:"icon-clock-past ".concat(r),height:a,title:l,viewBox:"0 0 16 14",width:u},n.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(0 1)"},n.createElement("rect",{className:"fill-color",fill:o,height:"5",rx:".5",width:"1",x:"9.66",y:"3"}),n.createElement("rect",{className:"fill-color",fill:o,height:"1",rx:".5",width:"3",x:"9.66",y:"7"}),n.createElement("path",{className:"stroke-color",d:"M5.66 10.62C6.697 11.48 8.032 12 9.487 12c3.314 0 6-2.686 6-6s-2.686-6-6-6c-3.313 0-6 2.686-6 6",stroke:o,strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{className:"fill-color",d:"M6.317 5l-2.83 2.828L.66 5",fill:o})))},j=r(10),k=function(e){var t=e.className,r=void 0===t?"":t,i=e.color,o=void 0===i?j.h:i,s=e.height,a=void 0===s?16:s,l=e.title,c=e.width,u=void 0===c?16:c;return n.createElement(D.a,{className:"icon-download ".concat(r),height:a,title:l,viewBox:"0 0 16 16",width:u},n.createElement("path",{className:"fill-color",fill:o,fillRule:"evenodd",d:"M14 14v1H2v-1h12zM10.996 2v4.997H14L8 13 2 6.997h3.004V2h5.992zm-.998 1H6.002v4.996h-1.59L8 11.586l3.589-3.59H9.998V3z"}))},A=r(104),M=r(162),S=r(714),T=function(e){var t=e.className,r=void 0===t?"":t,i=e.color,o=void 0===i?j.h:i,s=e.height,a=void 0===s?16:s,l=e.title,c=e.width,u=void 0===c?16:c;return n.createElement(D.a,{className:"icon-upload ".concat(r),height:a,title:l,viewBox:"0 0 16 16",width:u},n.createElement("path",{className:"fill-color",fill:o,fillRule:"evenodd",d:"M14 14v1H2v-1h12zM8 1l6 6.003h-3.004V12H5.004V7.003H2L8 1zm0 1.413l-3.589 3.59h1.591v4.998h3.996V6.004h1.59L8 2.414z"}))},C=r(36),N=r(91),R=r(175);r(962);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var L=function(e){var t=e.action,r=e.children,i=e.fileId,o=e.isCurrent,s=x(e,["action","children","fileId","isCurrent"]);return n.createElement(R.b,_({className:"bcs-VersionsItemAction","data-resin-iscurrent":o,"data-resin-itemid":i,"data-resin-target":t},s),r)},B=(r(963),function(e){e.stopPropagation()}),F=function(e){e.stopPropagation()},U=function(e){var t=e.fileId,r=e.isCurrent,i=void 0!==r&&r,o=e.isRetained,s=void 0!==o&&o,a=e.onDelete,l=e.onDownload,c=e.onPreview,u=e.onPromote,d=e.onRestore,f=e.showDelete,m=void 0!==f&&f,p=e.showDownload,h=void 0!==p&&p,y=e.showPreview,g=void 0!==y&&y,w=e.showPromote,V=void 0!==w&&w,E=e.showRestore,O=void 0!==E&&E;return m||h||g||V||O?n.createElement(P.a,{className:"bcs-VersionsItemActions",constrainToScrollParent:!0,constrainToWindow:!0,isRightAligned:!0,onMenuClose:B},n.createElement(C.a,{className:"bcs-VersionsItemActions-toggle","data-resin-iscurrent":i,"data-resin-itemid":t,"data-resin-target":"overflow",onClick:F,type:"button"},n.createElement(A.a,{height:4,width:14}),n.createElement(v.b,b.versionActionToggle,(function(e){return n.createElement("span",{className:"accessibility-hidden"},e)}))),n.createElement(R.a,{className:"bcs-VersionsItemActions-menu","data-resin-component":"preview","data-resin-feature":"versions"},g&&n.createElement(L,{action:"preview",fileId:t,isCurrent:i,onClick:c},n.createElement(M.a,null),n.createElement(v.b,b.versionActionPreview)),h&&n.createElement(L,{action:"download",fileId:t,isCurrent:i,onClick:l},n.createElement(k,null),n.createElement(v.b,b.versionActionDownload)),V&&n.createElement(L,{action:"promote",fileId:t,isCurrent:i,onClick:u},n.createElement(T,null),n.createElement(v.b,b.versionActionPromote)),O&&n.createElement(L,{action:"restore",fileId:t,isCurrent:i,onClick:d},n.createElement(I,{height:14,width:14}),n.createElement(v.b,b.versionActionRestore)),m&&n.createElement(N.a,{position:"middle-left",text:n.createElement(v.b,b.versionActionDisabledRetention),isTabbable:!1,isDisabled:!s},n.createElement(L,{action:"remove",fileId:t,isCurrent:i,isDisabled:s,onClick:a},n.createElement(S.a,null),n.createElement(v.b,b.versionActionDelete))))):null},W=r(7),z=r.n(W),H=r(17);r(964);function Y(e){return(Y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t){return!t||"object"!==Y(t)&&"function"!==typeof t?q(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $=function(e){function t(){var e,r;G(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Q(q(r=J(this,(e=Z(t)).call.apply(e,[this].concat(i)))),"setButtonRef",(function(e){r.buttonRef=e})),Q(q(r),"setScroll",(function(){var e=r.props.isSelected;r.buttonRef&&e&&Object(H.e)(r.buttonRef)})),r}var r,i,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,e),r=t,(i=[{key:"componentDidMount",value:function(){this.setScroll()}},{key:"componentDidUpdate",value:function(e){var t=e.isSelected;this.props.isSelected!==t&&this.setScroll()}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.fileId,i=e.isCurrent,o=e.isDisabled,s=e.isSelected,a=e.onClick,l=z()("bcs-VersionsItemButton",{"bcs-is-disabled":o,"bcs-is-selected":s&&!o});return n.createElement(C.a,{"aria-disabled":o,className:l,"data-resin-iscurrent":i,"data-resin-itemid":r,"data-resin-target":"select",getDOMRef:this.setButtonRef,isDisabled:o,onClick:a,type:"button"},t)}}])&&X(r.prototype,i),o&&X(r,o),t}(n.Component);Q($,"defaultProps",{isCurrent:!1,isDisabled:!1,isSelected:!1});var ee=$;r(965);function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var re,ne=Object(v.g)((function(e){var t=e.intl,r={versionNumber:e.versionNumber};return n.createElement("div",{"aria-label":t.formatMessage(b.versionNumberLabel,r),className:"bcs-VersionsItemBadge"},n.createElement(v.b,te({},b.versionNumberBadge,{values:r})))})),ie=r(733),oe=r(1);function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var le,ce=(ae(re={},oe.af,b.versionRetentionDelete),ae(re,oe.cf,b.versionRetentionRemove),re),ue=function(e){var t=e.retention||{},r=t.disposition_at,i=t.winning_retention_policy||{},o=i.disposition_action,s=i.retention_length,a=r&&new Date(r).getTime();return o?s!==oe.bf&&a?n.createElement(v.b,se({},ce[o],{values:{time:n.createElement(ie.a,{timestamp:a,showWeekday:!0})}})):n.createElement(v.b,b.versionRetentionIndefinite):null};r(966);function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var me=(fe(le={},oe.Xe,b.versionDeletedBy),fe(le,oe.Ze,b.versionRestoredBy),fe(le,oe.Ye,b.versionPromotedBy),fe(le,oe.df,b.versionUploadedBy),le),ve=function(e){var t=e.fileId,r=e.isCurrent,i=void 0!==r&&r,o=e.isSelected,s=void 0!==o&&o,a=e.isWatermarked,l=void 0!==a&&a,c=e.onDelete,u=e.onDownload,d=e.onPreview,f=e.onPromote,m=e.onRestore,p=e.version,h=e.versionCount,y=e.versionLimit,g=p.created_at,w=p.id,V=p.is_download_available,P=p.permissions,D=void 0===P?{}:P,I=p.restored_at,j=p.retention,k=p.size,A=p.trashed_at,M=p.version_number,S=p.version_promoted,T=D.can_delete,C=D.can_download,N=D.can_preview,R=D.can_upload,_=j||{},x=_.applied_at,L=_.disposition_at,B=L&&new Date(L),F=E.a.getVersionAction(p),W=M?parseInt(M,10):1,z=I||A||g,H=z&&new Date(z).getTime(),Y=E.a.getVersionUser(p).name||n.createElement(v.b,b.versionUserUnknown),G=F===oe.Xe,X=!!V,J=h-W>=y,Z=l&&!i,q=!!x&&(!B||B>new Date),K=N&&!G&&!J&&!Z,Q=T&&!G&&!i,$=C&&!G&&X,te=R&&!G&&!i,re=T&&G,se=K&&!s,ae=Q||$||se||te||re,le=function(e){return function(){e&&e(w)}};return n.createElement("div",{className:"bcs-VersionsItem"},n.createElement(ee,{fileId:t,isCurrent:i,isDisabled:!K,isSelected:s,onClick:le(d)},n.createElement("div",{className:"bcs-VersionsItem-badge"},n.createElement(ne,{versionNumber:M})),n.createElement("div",{className:"bcs-VersionsItem-details"},i&&n.createElement("div",{className:"bcs-VersionsItem-current"},n.createElement(v.b,b.versionCurrent)),n.createElement("div",{className:"bcs-VersionsItem-log",title:Y},n.createElement(v.b,de({},me[F],{values:{name:Y,versionPromoted:S}}))),n.createElement("div",{className:"bcs-VersionsItem-info"},H&&n.createElement("time",{className:"bcs-VersionsItem-date",dateTime:z},n.createElement(ie.a,{alwaysShowTime:!0,relativeThreshold:3e5,timestamp:H})),!!k&&n.createElement("span",{className:"bcs-VersionsItem-size"},Object(O.a)(k))),q&&n.createElement("div",{className:"bcs-VersionsItem-retention"},n.createElement(ue,{retention:j})),J&&ae&&n.createElement("div",{className:"bcs-VersionsItem-footer"},n.createElement(v.b,de({},b.versionLimitExceeded,{values:{versionLimit:y}}))))),!J&&ae&&n.createElement(U,{fileId:t,isCurrent:i,isRetained:q,onDelete:le(c),onDownload:le(u),onPreview:le(d),onPromote:le(f),onRestore:le(m),showDelete:Q,showDownload:$,showPreview:se,showPromote:te,showRestore:re}))};r(967);function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var he=function(e){var t=e.currentId,r=e.versions,n=pe(e,["currentId","versions"]);return i.a.createElement("ul",{className:"bcs-VersionsList"},r.map((function(e){return i.a.createElement("li",{className:"bcs-VersionsList-item",key:e.id},i.a.createElement(m.c,{render:function(r){var o=r.match;return i.a.createElement(ve,be({isCurrent:t===e.id,isSelected:o.params.versionId===e.id,version:e},n))}}))})))};r(968);function ye(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ge=function(e){var t=e.heading,r=ye(e,["heading"]);return i.a.createElement("section",{className:"bcs-VersionsGroup"},i.a.createElement("h1",{className:"bcs-VersionsGroup-heading"},t),i.a.createElement(he,r))};r(969);function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ve(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ee=i.a.memo((function(e){var t=e.intl,r=e.versions,n=Ve(e,["intl","versions"]),o=(r[0]||{}).id,s=r.reduce((function(e,r){var n=w()(e),i=function(e){var t=e.intl,r=e.version.created_at,n=new Date,i=n.getDay(),o=n.getDate()-i,s=V.d(r);return V.h(s)?t.formatMessage(b.versionsToday):V.i(s)?t.formatMessage(b.versionsYesterday):V.g(s)?V.f(s)?s.getDate()<=o-7?t.formatMessage(b.versionsThisMonth):s.getDate()<=o?t.formatMessage(b.versionsPriorWeek):t.formatDate(r,{weekday:"long"}):t.formatDate(r,{month:"long"}):t.formatDate(r,{year:"numeric"})}({intl:t,version:r});return n&&n.groupHeading===i||e.push({groupHeading:i,groupVersions:[]}),w()(e).groupVersions.push(r),e}),[]);return i.a.createElement("ul",{className:"bcs-VersionsMenu"},s.map((function(e){var t=e.groupHeading,r=e.groupVersions;return i.a.createElement("li",{className:"bcs-VersionsMenu-item",key:t},i.a.createElement(ge,we({currentId:o,heading:t,versions:r},n)))})))})),Oe=Object(v.g)(Ee),Pe=r(332),De=r(69);r(970);function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function je(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ke=oe.F,Ae=function(e){var t=e.error,r=e.isLoading,i=e.parentName,o=e.versions,s=je(e,["error","isLoading","parentName","versions"]),a=o.length>=ke,l=!!o.length,c=!r&&!l,u=!!t;return n.createElement(y.a,{className:"bcs-Versions","data-resin-component":"preview","data-resin-feature":"versions",title:n.createElement(n.Fragment,null,n.createElement(Pe.a,{"data-resin-target":"back",to:"/".concat(i)}),n.createElement(v.b,b.versionsTitle))},n.createElement(De.a,{className:"bcs-Versions-content",crawlerPosition:"top",isLoading:r},u&&n.createElement(h.a,{title:n.createElement(v.b,b.versionServerError)},n.createElement(v.b,t)),c&&n.createElement("div",{className:"bcs-Versions-empty"},n.createElement(v.b,b.versionsEmpty)),l&&n.createElement("div",{className:"bcs-Versions-menu"},n.createElement(Oe,Ie({versions:o},s))),a&&n.createElement("div",{className:"bcs-Versions-maxEntries"},n.createElement(v.b,Ie({},b.versionMaxEntries,{values:{maxVersions:ke}})))))},Me=r(15);function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=function e(t){var r=this,n=t.api,i=t.fileId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,"fetchData",(function(){return Promise.all([r.fetchFile(),r.fetchVersions()]).then(r.fetchVersionCurrent)})),Te(this,"fetchDownloadUrl",(function(e){return new Promise((function(t,n){return e?r.api.getFileAPI().getDownloadUrl(r.fileId,e,t,n):n(new Error("Could not find requested version"))}))})),Te(this,"fetchFile",(function(){return new Promise((function(e,t){return r.api.getFileAPI().getFile(r.fileId,e,t,{fields:Me.e,forceFetch:!0})}))})),Te(this,"fetchVersions",(function(){return new Promise((function(e,t){return r.api.getVersionsAPI(!1).getVersions(r.fileId,e,t)}))})),Te(this,"fetchVersionCurrent",(function(e){var t=Se(e,2),n=t[0],i=t[1],o=n.file_version,s=void 0===o?{}:o;return new Promise((function(e,t){return r.api.getVersionsAPI(!1).getVersion(r.fileId,s.id,(function(t){e([n,r.api.getVersionsAPI(!1).addCurrentVersion(t,i,n)])}),t)}))})),Te(this,"fetchVersion",(function(e){return new Promise((function(t,n){return r.api.getVersionsAPI(!1).getVersion(r.fileId,e,t,n)}))})),Te(this,"deleteVersion",(function(e){var t=e||{},n=t.id,i=t.permissions,o=void 0===i?{}:i;return new Promise((function(e,t){return r.api.getVersionsAPI(!1).deleteVersion({fileId:r.fileId,permissions:o,successCallback:e,errorCallback:t,versionId:n})}))})),Te(this,"promoteVersion",(function(e){var t=e||{},n=t.id,i=t.permissions,o=void 0===i?{}:i;return new Promise((function(e,t){return r.api.getVersionsAPI(!1).promoteVersion({fileId:r.fileId,permissions:o,successCallback:e,errorCallback:t,versionId:n})}))})),Te(this,"restoreVersion",(function(e){var t=e||{},n=t.id,i=t.permissions,o=void 0===i?{}:i;return new Promise((function(e,t){return r.api.getVersionsAPI(!1).restoreVersion({fileId:r.fileId,permissions:o,successCallback:e,errorCallback:t,versionId:n})}))})),this.api=n,this.fileId=i},Ne=r(222);function Re(e){return(Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function xe(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(r,!0).forEach((function(t){Xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?Ye(e):t}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Je=function(e){function t(){var e,r;Ue(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Xe(Ye(r=ze(this,(e=He(t)).call.apply(e,[this].concat(i)))),"state",{isLoading:!0,isWatermarked:!1,versionCount:1/0,versionLimit:1/0,versions:[]}),Xe(Ye(r),"window",window),Xe(Ye(r),"handleActionDelete",(function(e){return r.setState({isLoading:!0}),r.api.deleteVersion(r.findVersion(e)).then((function(){return r.api.fetchVersion(e)})).then(r.handleDeleteSuccess).then((function(){return r.props.onVersionDelete(e)})).catch((function(){return r.handleActionError(b.versionActionDeleteError)}))})),Xe(Ye(r),"handleActionDownload",(function(e){return r.api.fetchDownloadUrl(r.findVersion(e)).then(p.a).then((function(){return r.props.onVersionDownload(e)})).catch((function(){return r.handleActionError(b.versionActionDownloadError)}))})),Xe(Ye(r),"handleActionPreview",(function(e){r.updateVersion(e),r.props.onVersionPreview(e)})),Xe(Ye(r),"handleActionPromote",(function(e){return r.setState({isLoading:!0}),r.api.promoteVersion(r.findVersion(e)).then(r.api.fetchData).then(r.handleFetchSuccess).then(r.handlePromoteSuccess).then((function(){return r.props.onVersionPromote(e)})).catch((function(){return r.handleActionError(b.versionActionPromoteError)}))})),Xe(Ye(r),"handleActionRestore",(function(e){return r.setState({isLoading:!0}),r.api.restoreVersion(r.findVersion(e)).then((function(){return r.api.fetchVersion(e)})).then(r.handleRestoreSuccess).then((function(){return r.props.onVersionRestore(e)})).catch((function(){return r.handleActionError(b.versionActionRestoreError)}))})),Xe(Ye(r),"handleActionError",(function(e){r.setState({error:e,isLoading:!1})})),Xe(Ye(r),"handleDeleteSuccess",(function(e){var t=r.props.versionId,n=e.id;r.mergeResponse(e),n===t&&r.updateVersionToCurrent()})),Xe(Ye(r),"handleRestoreSuccess",(function(e){r.mergeResponse(e)})),Xe(Ye(r),"handleFetchError",(function(){r.setState({error:b.versionFetchError,isLoading:!1,isWatermarked:!1,versionCount:0,versions:[]})})),Xe(Ye(r),"handleFetchSuccess",(function(e){var t=Fe(e,2),n=t[0],i=t[1],o=r.props.api,s=n.version_limit,a=l()(n,"watermark_info.is_watermarked",!1),c=null!==s&&void 0!==s?s:1/0,u=o.getVersionsAPI(!1).addPermissions(i,n)||{},d=u.entries,f=u.total_count;return r.setState({error:void 0,isLoading:!1,isWatermarked:a,versionCount:f,versionLimit:c,versions:r.sortVersions(d)},r.verifyVersion),[n,i]})),Xe(Ye(r),"handlePromoteSuccess",(function(e){var t=Fe(e,1)[0].file_version;t&&r.updateVersion(t.id)})),Xe(Ye(r),"initialize",(function(){r.api=new Ce(r.props)})),Xe(Ye(r),"fetchData",(function(){r.api.fetchData().then(r.handleFetchSuccess).catch(r.handleFetchError)})),Xe(Ye(r),"findVersion",(function(e){return r.state.versions.find((function(t){return t.id===e}))})),Xe(Ye(r),"getCurrentVersionId",(function(){var e=r.state.versions;return e[0]?e[0].id:null})),Xe(Ye(r),"mergeVersions",(function(e){var t=r.state.versions,n=e?e.id:"";return t.map((function(t){return t.id===n?u()(Be({},t),e):t}))})),Xe(Ye(r),"mergeResponse",(function(e){var t=r.mergeVersions(e);r.setState({error:void 0,isLoading:!1,versions:t})})),Xe(Ye(r),"updateVersion",(function(e){var t=r.props,n=t.history,i=t.match;return n.push(Object(m.f)(i.path,Be({},i.params,{versionId:e})))})),Xe(Ye(r),"updateVersionToCurrent",(function(){r.updateVersion(r.getCurrentVersionId())})),Xe(Ye(r),"verifyVersion",(function(){var e=r.props,t=e.onVersionChange,n=e.versionId,i=r.findVersion(n);i?t(i,{currentVersionId:r.getCurrentVersionId(),updateVersionToCurrent:r.updateVersionToCurrent}):r.updateVersionToCurrent()})),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.initialize(),this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=e.fileId,r=e.versionId,n=this.props,i=n.fileId,o=n.versionId;i!==t&&this.refresh(),o!==r&&this.verifyVersion()}},{key:"componentWillUnmount",value:function(){this.props.onVersionChange(null)}},{key:"refresh",value:function(){this.initialize(),this.setState({isLoading:!0},this.fetchData)}},{key:"sortVersions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return xe(e).sort((function(e,t){return Date.parse(t.created_at)-Date.parse(e.created_at)}))}},{key:"render",value:function(){var e=this.props,t=e.fileId,r=e.parentName;return i.a.createElement(Ae,_e({fileId:t,onDelete:this.handleActionDelete,onDownload:this.handleActionDownload,onPreview:this.handleActionPreview,onPromote:this.handleActionPromote,onRestore:this.handleActionRestore,parentName:r},this.state))}}])&&We(r.prototype,n),o&&We(r,o),t}(i.a.Component);Xe(Je,"defaultProps",{onVersionChange:f.a,onVersionDelete:f.a,onVersionDownload:f.a,onVersionPreview:f.a,onVersionPromote:f.a,onVersionRestore:f.a,parentName:""});var Ze=s()([m.g,Ne.b])(Je)}}]);
//# sourceMappingURL=8.7c4b4446.chunk.js.map